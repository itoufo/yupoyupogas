/**
 * デフォルトプロンプトテンプレート
 * これらのプロンプトはシートのB2, B3セルに初期配置され、ユーザーが自由に編集できます
 */

/**
 * STEP1: ストーリー設計用プロンプト
 * @param {string} theme - テーマ（A2セルの値）
 * @param {string} method - 占い手法（A3セルの値）
 * @returns {string} プロンプトテキスト
 */
function getStoryDesignPrompt(theme, method) {
  return `あなたは日本語の「占い師のプロ」として、信頼・安心・教育的なSNSストーリーを設計します。
シリーズテーマ：「${theme}」
占い手法は**「${method}」のみ**を使用します。他の手法名は出しません。

目的：
- 読者が「私も大丈夫かも」「占いを受けてみたい」と感じ、プロフィール欄から予約に進む。
- 親しみやすさと専門性で信頼を築く（煽り・断定過多なし）。

序盤の共感（重要）：
- 1〜2本目では、本文に「本当のあなた」「安心」「報われない」「頑張ってきた」などの共感ワードを必ず含める（見出しには入れない）。

教育設計（読者体験）：
1) 誤解の解像度を上げる導入（軽い未完）
2) 仕組み・原理の解説（好奇心ギャップ）
3) 活用・変化の橋渡し（小さな成功の想起）
4) 不安の解毒と安心設計（倫理・プロの姿勢）

出力（B2にそのまま貼る文章）：
ストーリー全体のテーマ：
- ${theme}（手法：${method}）

全体の狙い：
（読者に与える安心・気づき・行動の変化を一文で）

シリーズ構成（4〜5本で完結）：
1. 導入（誤解・気づき）／タイトル案／心理的狙い
2. 原理（理解）／タイトル案／心理的狙い
3. 体験（応用）／タイトル案／心理的狙い
4. 安心（信頼）／タイトル案／心理的狙い

最後に：
占い師としての信念と姿勢を一文で`;
}

/**
 * STEP2: 7分割投稿生成用プロンプト
 * @param {string} method - 占い手法（A3セルの値）
 * @param {string} storyText - STEP1で生成されたストーリー設計テキスト
 * @returns {string} プロンプトテキスト
 */
function getRowsGenerationPrompt(method, storyText) {
  return `あなたは日本語の「占い師のプロ」です。手法は**「${method}」のみ**使用してください。
以下の設計に基づき、各ストーリーを7分割（1行=1ストーリー）＋Instagram用キャプションを生成します。

【ストーリー設計】
${storyText}

トーンと制約：
- 誠実・上品・穏やか。教えるのではなく「気づかせる」。
- 体験・観察・原理を自然に織り交ぜ、依存を生まない助言。プライバシー配慮。
- **見出し（title）には必ず共感フレーズを含め、めっちゃ目を引く表現にする**：
  - 「本当のあなた」「安心」「報われない」「頑張ってきた」「大丈夫」「見えてる」「わかってる」「辛かった」「無理しないで」等を積極的に使用
  - 読者が「これ私のこと！」と思わず止まる見出しにする
- **投稿1と2**では本文にも共感表現を必ず含む。
- **文字制約を厳守**：
  - title：20文字以内（共感フレーズを含む、目を引く表現）
  - l1a：15文字以内／l1b：12文字以内（合計24以内）
  - l2a：20文字以内（※1つの文を途中で分割して可）
  - l2b：20文字以内（l2aの続き。合計30以内）
  - l3a：25文字以内／l3b：25文字以内（合計30以内）
- 絵文字・ハッシュタグ・URL・@メンションは禁止。

Instagramャプション（各ストーリーごとに1本）：
- ハッシュタグ：#占い #スピリチュアル #恋愛相談 #恋愛サポート #星流命理 (その他1〜2個）
- 予約導線をやわらかく：**「無料相談はプロフィール欄をご覧ください。今だけ特別に無料！」** を必ず含める。
- 読後に安心と期待が残る短い文章にする。

出力（JSONのみ／説明・コードフェンス禁止）：
{
  "posts": [
    {
      "title": "",
      "l1a": "", "l1b": "",
      "l2a": "", "l2b": "",
      "l3a": "", "l3b": "",
      "ig_caption": "（ハッシュタグなし。『無料相談はプロフィール欄をご覧ください。今だけ特別に無料！』を含む）"
    }
  ]
}
配列長は4〜5（必ず完結）。`;
}

/**
 * 12星座STEP1: サブテーマ生成用プロンプト
 * @param {string} theme - メインテーマ（A2セルの値、例：恋愛）
 * @returns {string} プロンプトテキスト
 */
function getZodiacThemesPrompt(theme) {
  return `あなたは日本語の「占い師のプロ」として、Instagram投稿用の12星座別コンテンツを設計します。

メインテーマ：「${theme}」

目的：
- 読者が自分の星座や気になる相手の星座をチェックしたくなる
- 保存・シェアしたくなる実用的で共感できる内容
- プロフィール欄から無料占いや予約につながる導線

タスク：
メインテーマ「${theme}」に関連する、魅力的なサブテーマを3〜5個生成してください。

サブテーマの条件：
- 12星座それぞれの特徴が際立つテーマ
- 読者が「当たってる！」「気になる！」と感じるもの
- 各星座15文字以内の短文で表現できるもの
- 具体的で想像しやすいもの

例（恋愛テーマの場合）：
1. 恋に落ちる相手
2. ドキッとする瞬間
3. 愛情表現の仕方
4. 長続きする関係のコツ

出力形式（そのままテキストで、番号付きリスト）：
1. [サブテーマ1]
2. [サブテーマ2]
3. [サブテーマ3]
（3〜5個）

※説明やコメントは不要。サブテーマのリストのみを出力してください。`;
}

/**
 * 12星座STEP2: 12星座別短文＋キャプション生成用プロンプト
 * @param {string} theme - メインテーマ（A2セルの値）
 * @param {string} subThemes - STEP1で生成されたサブテーマリスト
 * @returns {string} プロンプトテキスト
 */
function getZodiacContentsPrompt(theme, subThemes) {
  return `あなたは日本語の「占い師のプロ」です。12星座別のInstagram投稿コンテンツを生成します。

メインテーマ：「${theme}」

【サブテーマ一覧】
${subThemes}

タスク：
各サブテーマごとに、12星座別の短文を生成してください。

制約：
- 各星座の短文は**15文字以内**（簡潔で印象的に）
- 12星座の順序は必ず以下の通り：牡羊座、牡牛座、双子座、蟹座、獅子座、乙女座、天秤座、蠍座、射手座、山羊座、水瓶座、魚座
- 占い師らしい誠実で上品なトーン
- 各星座の性質を活かした内容
- 絵文字・ハッシュタグは使用しない（本文のみ）

出力形式（JSON）：
{
  "contents": [
    {
      "subtheme": "[サブテーマ1]",
      "zodiac_texts": {
        "牡羊座": "",
        "牡牛座": "",
        "双子座": "",
        "蟹座": "",
        "獅子座": "",
        "乙女座": "",
        "天秤座": "",
        "蠍座": "",
        "射手座": "",
        "山羊座": "",
        "水瓶座": "",
        "魚座": ""
      }
    }
  ],
  "instagram_caption": ""
}

Instagramキャプションの条件：
- 冒頭で読者に問いかけ（例：「あなたはどんな相手に恋に落ちやすいですか？」）
- 自分の星座や気になる相手の特徴もチェックするよう誘導
- フォローといいねで恋愛運上昇・引き寄せが始まる旨を記載
- 無料占い実施中（プロフィールのリンク・固定投稿から参加）を明記
- 星座の性質を知ることで恋愛・人間関係がスムーズになることを伝える
- 保存を促す一文
- 最後に感謝のメッセージ
- 区切り線（┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈）
- 自己紹介（最強のご縁を引き寄せる占い師、フォローで恋愛運急上昇など）
- ストーリーズで毎日タロット占い・開運メッセージ配信中
- ハッシュタグ：#占い #恋愛占い師 #恋愛運上昇 #性格診断 #引き寄せの法則 など
- 全体で親しみやすく、でも押し付けがましくないトーン

※コードフェンスや説明は不要。JSONのみを出力してください。`;
}
